<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Document</title>
</head>

<body>
  <button id="test">test</button>
  <script>
    document.getElementById("test").addEventListener("click", function () {
      // window.postMessage({ type: 'toPage', params: { msg: 'Hello, I am page.' } }, '*');
      var qos = new QOSWallet();
      // qos
      //   .process({
      //     type: "transfer",
      //     data: {
      //       account: {},
      //       qos: 100,
      //       to: "address11111"
      //     }
      //   })
      //   .then(function(res) {
      //     console.log("test.html", res);
      //   });

      qos.enable()
        .then(function (res) {
          console.log("test.html-enable", res);
          console.log("test.html-enable===",res.res.data);
          if (res.res.data.flag == "unregister") {
            alert("您还没有账户,请创建或导入账户后重新操作!");
          }else {
            // alert("有账户,无关是否登录");
            // 页面操作类型,传递不同的type和data
            qos
              .process({
                type: "deleagte",
                data: {
                  validator: "qosval1x6d58mx3hssq6ksaftfwvdskaz35pumr49e8gm"
                }
              })
              .then(function(res) {
                console.log("test.html-process", res);
              });
          }
        });


    });
      // window.addEventListener('DOMContentLoaded', function () {
      // })
      // console.log(window.qosApi)
      // var port = chrome.runtime.connect({ name: "qos-web-wallet" });
      // port.postMessage({ joke: "qos-web-wallet" });
      // port.onMessage.addListener(function (msg) {
      //   if (msg.question == "是谁？")
      //     port.postMessage({ answer: "女士" });
      //   else if (msg.question == "哪位女士？")
      //     port.postMessage({ answer: "Bovary 女士" });
      // });
  </script>
</body>

</html>